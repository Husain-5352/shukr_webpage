<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guest Feedback | عرض الشكر</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'coffee-dark': '#3d2b1f',
                        'coffee-muted': '#5d4037',
                        'accent-gold': '#d4a373',
                    }
                }
            }
        }
    </script>
    <!-- External CSS for Fonts -->
    <link rel="stylesheet" href="qr.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --glass-bg: rgba(255, 254, 250, 0.45);
            --glass-border: rgba(61, 43, 31, 0.12);
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            margin: 0;
            background: #fdfaf6;
        }

        .page-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: url('assets/5170031.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .page-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.1) 0%, rgba(253, 250, 246, 0.4) 100%);
        }

        .thuluth-header {
            font-family: 'AlThuluth', serif;
            font-size: 6.5rem;
            color: #3d2b1f;
            text-shadow: 0 10px 30px rgba(61, 43, 31, 0.15);
            line-height: 1;
        }

        .alkanz-label {
            font-family: 'Alkanz', serif;
            font-size: 2.8rem;
            color: #3d2b1f;
            line-height: 1.4;
            font-weight: normal;
            text-rendering: optimizeLegibility;
            font-feature-settings: "kern", "liga";
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid var(--glass-border);
            box-shadow:
                0 30px 60px -12px rgba(61, 43, 31, 0.25),
                inset 0 0 0 1px rgba(255, 255, 255, 0.4);
            position: relative;
        }

        .dropdown-container {
            position: relative;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(61, 43, 31, 0.15);
            border-radius: 9999px;
            box-shadow: 0 4px 15px rgba(61, 43, 31, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #langSelect {
            appearance: none;
            background: transparent;
            width: 100%;
            padding: 0.8rem 3rem 0.8rem 2rem;
            color: #3d2b1f;
            font-size: 1rem;
            font-weight: 700;
            outline: none;
            cursor: pointer;
        }

        .suggestion-btn {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.45);
            border: 1px solid rgba(61, 43, 31, 0.1);
            color: #3d2b1f;
            line-height: 1.5;
            text-align: center;
            cursor: pointer;
            z-index: 30;
        }

        .suggestion-btn:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-3px);
            border-color: rgba(61, 43, 31, 0.2);
        }

        .suggestion-btn.selected {
            background: #3d2b1f !important;
            color: #fff !important;
            border-color: #3d2b1f !important;
            box-shadow: 0 12px 25px rgba(61, 43, 31, 0.3);
        }

        #feedbackText::placeholder {
            font-family: 'Alkanz', serif;
            color: rgba(61, 43, 31, 0.35);
            font-size: 1.8rem;
        }

        /* Language Specific Fonts */
        .font-gujarati {
            font-family: 'AnekGujarati', sans-serif !important;
        }

        .font-hindi {
            font-family: 'TiroHindi', serif !important;
        }

        .font-alfatemi {
            font-family: 'AlFatemi', serif !important;
            font-weight: normal !important;
            text-rendering: optimizeLegibility;
            font-feature-settings: "kern", "liga";
            line-height: 1.8 !important;
        }

        .font-alkanz {
            font-family: 'Alkanz', serif !important;
            font-weight: normal !important;
            text-rendering: optimizeLegibility;
            font-feature-settings: "kern", "liga";
        }

        .btn-submit {
            background: #3d2b1f;
            color: #fff;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-weight: 700;
            cursor: pointer;
        }

        .btn-submit:hover:not(:disabled) {
            transform: translateY(-4px) scale(1.02);
            background: #4e3423;
            box-shadow: 0 20px 40px rgba(61, 43, 31, 0.3);
        }

        .btn-submit:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .rtl {
            direction: rtl;
        }

        @media (max-width: 640px) {
            .thuluth-header {
                font-size: 3.8rem;
            }

            .alkanz-label {
                font-size: 2rem;
            }

            #feedbackText::placeholder {
                font-size: 1.4rem;
            }

            #langSelect {
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center py-10 px-6">
    <div class="page-bg"></div>
    <div class="page-overlay"></div>

    <main class="w-full flex flex-col items-center justify-center relative z-20 space-y-8">
        <h1 class="thuluth-header text-center w-full">عرض الشكر</h1>

        <div class="max-w-xl w-full glass-card rounded-[4rem] p-10 md:p-16" id="feedbackCard">

            <div class="text-center mb-8">
                <p class="alkanz-label">شكر ني عرض لكهوو</p>
            </div>

            <div class="flex justify-center mb-10">
                <div class="dropdown-container w-full max-w-[240px] relative">
                    <select id="langSelect">
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="ld">Lisan-al-Dawat</option>
                        <option value="gu">ગુજરાતી</option>
                        <option value="hi">हिन्दी</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-5 flex items-center text-coffee-dark/60">
                        <i class="fa-solid fa-chevron-down text-sm"></i>
                    </div>
                </div>
            </div>

            <form id="feedbackForm" onsubmit="handleFormSubmit(event)">
                <div class="mb-10">
                    <textarea id="feedbackText" rows="5"
                        class="w-full bg-white/20 border border-coffee-dark/15 rounded-[3rem] p-10 text-coffee-dark placeholder-coffee-dark/40 focus:ring-2 focus:ring-coffee-dark/20 focus:border-transparent outline-none transition-all resize-none shadow-inner text-xl font-medium"
                        placeholder="شكر ني عرض لكهوو"></textarea>
                </div>

                <div id="suggestionGrid" class="grid grid-cols-1 gap-5 mb-10">
                    <!-- Suggestions will be populated here -->
                </div>

                <button type="submit" id="submitBtn"
                    class="w-full py-6 rounded-full shadow-xl active:scale-95 transition-all flex items-center justify-center space-x-4 btn-submit text-2xl">
                    <span id="submitLabel">Submit</span>
                    <i class="fa-solid fa-paper-plane text-xl"></i>
                </button>
            </form>
        </div>
    </main>

    <div id="successModal"
        class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-coffee-dark/25 backdrop-blur-xl">
        <div
            class="bg-white rounded-[3.5rem] p-14 max-w-md w-full shadow-2xl scale-in text-center border border-coffee-dark/5">
            <div
                class="w-24 h-24 bg-amber-50 text-coffee-dark rounded-full flex items-center justify-center mx-auto mb-10">
                <i class="fa-solid fa-check text-5xl"></i>
            </div>
            <h3 class="text-3xl font-bold text-coffee-dark mb-4">شكرا</h3>
            <button onclick="closeModal()"
                class="w-full bg-coffee-dark text-white font-bold py-5 rounded-full hover:bg-stone-900 transition-all shadow-lg active:scale-95 text-xl">
                Close
            </button>
        </div>
    </div>

    <script>
        const langData = {
            en: {
                suggestions: ["I am deeply grateful for this blessed gift. May Allah Ta'ala grant Syedna Aali Qadr Mufaddal Saifuddin Aqa TUS a long, healthy life till the day of Qayamat. Aameen."],
                thanks: "Thank You!"
            },
            fr: {
                suggestions: ["Les bienfaits de Moulana sont si immenses que nul ne peut en acquitter pleinement le droit ni en exprimer toute la gratitude ; même des milliers de prosternations seraient insuffisantes.", "Qu’Allah lui accorde une longue vie, en bonne santé, jusqu’au Jour du Jugement."],
                thanks: "Merci!"
            },
            ld: {
                dir: 'rtl',
                font: 'font-alkanz',
                suggestions: ["اقا مولى طع ني هر نعمتو ثثر لاكهو شكر نا سجدة عرض كرووطط ححهوطط۔", "خدا اقا مولى طع ني عمر شريف نسس تاروز  قيامة دراز انسس دراز كرجو", "الحمد لله شكرا لله"],
                thanks: "شکریہ!"
            },
            gu: {
                font: 'font-gujarati',
                suggestions: ["મૌલા ની આ નેમત પર હું લાખો વખત શુકરના સજદા અદા કરું છું.", "ખુદા મૌલાને કિયામતના દિવસ સુધી સંપૂર્ણ તંદુરસ્તી અને સલામતીમાં બાકી રાખે."],
                thanks: "આભાર!"
            },
            hi: {
                font: 'font-hindi',
                suggestions: ["यह उपहार सदैव मौलाना की ओर से प्राप्त एक बरकत کے रूप میں संजोकर रखा जाएगा।", "अल्लाह हमारे मौला को सदैव प्रसन्न रखे और उन्हें कयामत के दिन तक लंबी उम्र प्रदान करे।"],
                thanks: "धन्यवाद!"
            }
        };

        let selectedSuggestions = new Set();
        let currentLang = 'en';

        function updateLanguage(lang) {
            currentLang = lang;
            const data = langData[lang];
            const card = document.getElementById('feedbackCard');
            const grid = document.getElementById('suggestionGrid');

            if (data.dir === 'rtl') card.classList.add('rtl');
            else card.classList.remove('rtl');

            grid.innerHTML = '';
            selectedSuggestions.clear();

            data.suggestions.forEach(text => {
                const btn = document.createElement('button');
                btn.className = `suggestion-btn p-8 text-xl font-bold rounded-[2rem] shadow-sm ${data.font || ''}`;
                btn.textContent = text;
                btn.type = 'button';

                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelectorAll('.suggestion-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    document.getElementById('feedbackText').value = text;
                    selectedSuggestions.clear();
                    selectedSuggestions.add(text);
                });

                grid.appendChild(btn);
            });
        }

        document.getElementById('langSelect').addEventListener('change', (e) => updateLanguage(e.target.value));

        async function handleFormSubmit(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const textContent = document.getElementById('feedbackText').value.trim();

            if (textContent === '' && selectedSuggestions.size === 0) {
                const card = document.getElementById('feedbackCard');
                card.animate([{ transform: 'translateX(-8px)' }, { transform: 'translateX(8px)' }, { transform: 'translateX(0)' }], { duration: 400 });
                return;
            }

            btn.disabled = true;
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin text-xl"></i>';

            await new Promise(r => setTimeout(r, 1500));

            btn.disabled = false;
            btn.innerHTML = originalHTML;

            confetti({
                particleCount: 200,
                spread: 120,
                origin: { y: 0.7 },
                colors: ['#3d2b1f', '#d4a373', '#fdfaf6']
            });

            const thanksText = langData[currentLang].thanks;
            document.querySelector('#successModal h3').textContent = thanksText;

            document.getElementById('successModal').classList.remove('hidden');
            document.getElementById('feedbackText').value = '';
            document.querySelectorAll('.suggestion-btn').forEach(b => b.classList.remove('selected'));
            selectedSuggestions.clear();
        }

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        window.onload = () => updateLanguage('en');
    </script>
</body>

</html>